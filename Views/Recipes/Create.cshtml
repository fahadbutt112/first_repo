@model MvcRecipeApp.Models.Recipe

@{
    ViewData["Title"] = "Create";
    // Optional: Check if we're in a "desserts-only" context (e.g., from a "Add Dessert" button)
    bool isDessertFlow = Context.Request.Query["category"] == "desserts";
}

<h1>Create</h1>

<form asp-action="Create" enctype="multipart/form-data">
    <div asp-validation-summary="ModelOnly"></div>

    <div>
        <label asp-for="Title"></label>
        <input asp-for="Title" />
        <span asp-validation-for="Title"></span>
    </div>

    <div>
        <label asp-for="Ingredients"></label>
        <input asp-for="Ingredients" placeholder="Optional" />
        <span asp-validation-for="Ingredients"></span>
    </div>

    <div>
        <label asp-for="Instructions"></label>
        <input asp-for="Instructions" placeholder="Optional" />
        <span asp-validation-for="Instructions"></span>
    </div>

    <!-- Updated: Category as dropdown -->
    <div>
        <label asp-for="Category"></label>
        <select asp-for="Category" class="form-control">
            <!-- Default to "desserts" if in dessert flow -->
            @if (isDessertFlow)
            {
                <option value="desserts" selected>Dessert</option>
            }
            else
            {
                <option value="">-- Select Category --</option>
                <option value="desserts">Dessert</option>
                <option value="main">Main Course</option>
                <option value="appetizer">Appetizer</option>
                <option value="beverage">Beverage</option>
            }
        </select>
        <span asp-validation-for="Category"></span>
    </div>

    <!-- Image upload field -->
    <div>
        <label>Upload Picture</label>
        <input type="file" name="imageFile" />
    </div>

    <div>
        <input type="submit" value="Create" />
    </div>
</form>

<a asp-action="Index">Back to List</a>

@section Scripts {
    @{await Html.RenderPartialAsync("_ValidationScriptsPartial");}
}